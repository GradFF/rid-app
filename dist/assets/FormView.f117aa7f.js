import{u as q,a as A,r as m,c as U,o as I,b as _,d as N,e as o,f as l,g as e,h as c,w as p,i as j,j as i,v as z,k as v,F as k,l as M,m as f,n as C,p as E,q as F,s as B,t as y}from"./index.95ddf099.js";import{s as L,_ as b}from"./Alert.5be4f3b0.js";import{g as J}from"./date.29c5fa09.js";let T=(w=21)=>crypto.getRandomValues(new Uint8Array(w)).reduce((r,n)=>(n&=63,n<36?r+=n.toString(36):n<62?r+=(n-26).toString(36).toUpperCase():n>62?r+="-":r+="_",r),"");const G={class:"max-w-screen-md mx-auto px-4 py-12"},Q={class:"flex items-center justify-between"},$=e("h1",{class:"text-3xl font-bold my-8"},"Solicita\xE7\xF5es",-1),H=e("p",{class:"text-lg font-bold"},"Solicita\xE7\xE3o Deferida.",-1),K={key:0},O={key:1},P=e("p",{class:"text-lg font-bold"},"Solicita\xE7\xE3o Indeferida.",-1),W=e("p",null,"Solicita\xE7\xE3o aguardando parecer da coordena\xE7\xE3o",-1),X=["onSubmit"],Y={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Z={class:"form-control"},ee=e("label",{class:"label"},[e("span",{class:"label-text"},"Curso")],-1),se=e("option",{disabled:"",selected:""},"Selecione o curso",-1),ae=e("option",null,"Integral",-1),te=e("option",null,"Noturno",-1),oe=[se,ae,te],le={class:"form-control"},ne=e("label",{class:"label"},[e("span",{class:"label-text"},"DRE")],-1),re={class:"form-control"},ie=e("label",{class:"label"},[e("span",{class:"label-text"},"Nome Completo")],-1),ue={class:"form-control"},de=e("label",{class:"label"},[e("span",{class:"label-text"},"Email")],-1),ce={key:0,class:"py-4 px-2 mb-4 border border-base-300 rounded-md col-span-2"},pe=e("legend",{class:"text-content text-sm font-semibold px-2"}," Qual(is) irregularidade(s) da CRID deseja regularizar? ",-1),me={class:"label cursor-pointer"},_e={class:"label-text font-medium"},ve={class:"px-4 block"},fe=["value"],be={class:"form-control sm:col-span-2"},he={class:"label cursor-pointer"},xe=e("span",{class:"label-text"},"Atesto que li, entendi as instru\xE7\xF5es descritas acima e estou ciente dos prazos para os procedimentos relativos a inscri\xE7\xE3o em disciplinas e sua eventual regulariza\xE7\xE3o: ",-1),ge={class:"form-control sm:col-span-2"},ye=e("label",{class:"label"},[e("span",{class:"label-text"},"Justificativa (Cite especificamente cada disciplina com irregularidade e a respectiva justificativa para a solicita\xE7\xE3o): ")],-1),we={class:"form-control sm:col-span-2"},ke=["href"],Ce=e("label",{class:"label"},[e("span",{class:"label-text"}," Anexe sua CRID mais recente (contendo as irregularidades) ")],-1),Ve={class:"block"},Se=e("span",{class:"sr-only"},"Choose profile photo",-1),De=["required"],Re={class:"py-4 sm:col-span-2"},qe=["disabled"],Ae=e("p",null," Sua solicita\xE7\xE3o foi analisada pela coordena\xE7ao. N\xE3o \xE9 poss\xEDvel alterar as informa\xE7\xF5es. ",-1),je={__name:"FormView",setup(w){const r=q(),n=A(),s=m({}),h=m(null),x=m(!1),g=m(null),d=U(()=>n.params.id||null);I(async()=>{h.value=await L.find(),d.value?s.value=await _.find(d.value):s.value={semester:"2022-2",course:"",register:"",name:"",email:"",problems:[],justification:"",term:!1,status:"Aguardando",created_at:J(),code:T(6),opinio:"",responsible:"",provided:""}});const V=async u=>{g.value=u.target.files[0]},S=async()=>{x.value=!0;try{const u=await _.upload(g.value,s.value.code);s.value.url=u,s.value.name=s.value.name.toUpperCase();const a=d.value?await _.update(s.value,d.value):await _.create(s.value);r.replace({name:"success",params:{id:a}})}catch(u){console.log(u)}finally{x.value=!1}};return(u,a)=>{const D=N("RouterLink");return o(),l("div",G,[e("div",Q,[$,c(D,{to:{name:"home"},class:"btn btn-ghost"},{default:p(()=>[B(" Voltar ")]),_:1})]),c(b,{show:s.value.status==="Deferido",type:"success"},{default:p(()=>[H,s.value.provided?(o(),l("p",K," Autoriza\xE7\xE3o efetivada no SIGA. Verifique sua CRID para confirmar ")):(o(),l("p",O,"A autoriza\xE7\xE3o ser\xE1 lan\xE7ada na sua CRID em breve."))]),_:1},8,["show"]),c(b,{show:s.value.status==="Indeferido",type:"error"},{default:p(()=>[P,e("p",null,y(s.value.opinio),1)]),_:1},8,["show"]),c(b,{show:s.value.status==="Aguardando"&&j(d)!=null,type:"info"},{default:p(()=>[W]),_:1},8,["show"]),e("form",{onSubmit:F(S,["prevent"])},[e("div",Y,[e("div",Z,[ee,i(e("select",{class:"select select-bordered","onUpdate:modelValue":a[0]||(a[0]=t=>s.value.course=t),required:""},oe,512),[[z,s.value.course]])]),e("div",le,[ne,i(e("input",{type:"text",placeholder:"DRE",class:"input input-bordered","onUpdate:modelValue":a[1]||(a[1]=t=>s.value.register=t),required:""},null,512),[[v,s.value.register]])]),e("div",re,[ie,i(e("input",{type:"text",placeholder:"Nome completo",class:"input input-bordered","onUpdate:modelValue":a[2]||(a[2]=t=>s.value.name=t),required:""},null,512),[[v,s.value.name]])]),e("div",ue,[de,i(e("input",{type:"text",placeholder:"email",class:"input input-bordered","onUpdate:modelValue":a[3]||(a[3]=t=>s.value.email=t),required:""},null,512),[[v,s.value.email]])]),h.value?(o(),l("fieldset",ce,[pe,(o(!0),l(k,null,M(h.value.problems,t=>(o(),l("div",{class:"form-control mb-4",key:t.title},[e("label",me,[e("div",_e,[e("span",null,y(t.title),1),e("small",ve,y(t.description),1)]),i(e("input",{type:"checkbox",class:"checkbox",value:t.title,"onUpdate:modelValue":a[4]||(a[4]=R=>s.value.problems=R)},null,8,fe),[[C,s.value.problems]])])]))),128))])):f("",!0),e("div",be,[e("label",he,[xe,i(e("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":a[5]||(a[5]=t=>s.value.term=t)},null,512),[[C,s.value.term]])])]),e("div",ge,[ye,i(e("textarea",{rows:"5",class:"textarea textarea-bordered w-full",placeholder:"Jusquifique o parecer","onUpdate:modelValue":a[6]||(a[6]=t=>s.value.justification=t)},null,512),[[v,s.value.justification]])]),e("div",we,[s.value.url?(o(),l("a",{key:0,href:s.value.url,class:"btn btn-link",target:"_blank",rel:"noopener noreferrer"},"Visualizar CRID",8,ke)):f("",!0),s.value.status&&s.value.status==="Aguardando"?(o(),l(k,{key:1},[Ce,e("label",Ve,[Se,e("input",{accept:"application/pdf",onChange:V,type:"file",class:"block w-full text-sm file:mr-4 file:btn file:btn-primary file:btn-outline",required:g.value!=null||!s.value.url},null,40,De)])],64)):f("",!0)]),e("div",Re,[s.value.status&&s.value.status==="Aguardando"?(o(),l("button",{key:0,type:"submit",class:E(["btn btn-primary px-6 disabled:cursor-not-allowed",x.value&&"loading"]),disabled:!s.value.term}," Salvar ",10,qe)):f("",!0),c(b,{show:s.value.status&&s.value.status!=="Aguardando",type:"info"},{default:p(()=>[Ae]),_:1},8,["show"])])])],40,X)])}}};export{je as default};
