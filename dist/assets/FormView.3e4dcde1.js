import{u as C,a as V,r as p,o as S,b as m,c as U,d as o,e as n,f as e,g as D,w as R,t as _,h as u,i,v as j,j as v,F as M,k as N,l as g,n as q,m as z,p as A}from"./index.1a78982f.js";import{s as B}from"./settings.bb30ec37.js";const F=()=>{let c=new Date;return`${c.getFullYear()}-${c.getMonth()+1}-${c.getDate()}`};let L=(c=21)=>crypto.getRandomValues(new Uint8Array(c)).reduce((r,l)=>(l&=63,l<36?r+=l.toString(36):l<62?r+=(l-26).toString(36).toUpperCase():l>62?r+="-":r+="_",r),"");const E={class:"max-w-screen-md mx-auto px-4 py-12"},I={class:"flex items-center justify-between"},$=e("h1",{class:"text-3xl font-bold my-8"},"Solicita\xE7\xF5es",-1),J={key:0,class:"alert alert-success shadow-lg mb-6"},T=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Q={class:"text-lg font-bold"},Y={key:0},G=["onSubmit"],H={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},K={class:"form-control"},O=e("label",{class:"label"},[e("span",{class:"label-text"},"Curso")],-1),P=e("option",{disabled:"",selected:""},"Selecione o curso",-1),W=e("option",null,"Integral",-1),X=e("option",null,"Noturno",-1),Z=[P,W,X],ee={class:"form-control"},se=e("label",{class:"label"},[e("span",{class:"label-text"},"DRE")],-1),te={class:"form-control"},ae=e("label",{class:"label"},[e("span",{class:"label-text"},"Nome Completo")],-1),le={class:"form-control"},oe=e("label",{class:"label"},[e("span",{class:"label-text"},"Email")],-1),ne={key:0,class:"py-4 px-2 mb-4 border border-base-300 rounded-md col-span-2"},re=e("legend",{class:"text-content text-sm font-semibold px-2"}," Qual(is) irregularidade(s) da CRID deseja regularizar? ",-1),ie={class:"label cursor-pointer"},ce={class:"label-text font-medium"},de={class:"px-4 block"},ue=["value"],pe={class:"form-control sm:col-span-2"},me={class:"label cursor-pointer"},_e=e("span",{class:"label-text"},"Atesto que li, entendi as instru\xE7\xF5es e estou ciente dos prazos para os procedimentos relativos a inscri\xE7\xE3o em disciplinas e sua eventual regulariza\xE7\xE3o: ",-1),ve={class:"form-control sm:col-span-2"},be=e("label",{class:"label"},[e("span",{class:"label-text"},"Justificativa (Cite especificamente cada disciplina com irregularidade e a respectiva justificativa para a solicita\xE7\xE3o): ")],-1),he={class:"form-control sm:col-span-2"},fe=["href"],ge=e("label",{class:"label"},[e("span",{class:"label-text"}," Anexe sua CRID mais recente (contendo as irregularidades) ")],-1),xe={class:"block"},we=e("span",{class:"sr-only"},"Choose profile photo",-1),ke={class:"py-4 sm:col-span-2"},ye=["disabled"],Ce={key:1,class:"alert alert-warning shadow-lg mt-2"},Ve=e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})]),e("span",null," Sua solicita\xE7\xE3o foi analisada pela coordena\xE7ao. N\xE3o \xE9 poss\xEDvel alterar as informa\xE7\xF5es. ")],-1),Se=[Ve],Re={__name:"FormView",setup(c){const r=C(),l=V(),s=p({}),b=p(null),h=p(!1),f=p(null);S(async()=>{b.value=await B.find(),l.params.id?s.value=await m.find(l.params.id):s.value={course:"",register:"",name:"",email:"",problems:[],justification:"",term:!1,status:"Aguardando",created_at:F(),code:L(6),opinio:"",responsible:"",provided:""}});const x=async d=>{f.value=d.target.files[0]},w=async()=>{h.value=!0;try{const d=await m.upload(f.value,s.value.code);s.value.url=d,s.value.name=s.value.name.toUpperCase();const t=l.params.id?await m.update(s.value,l.params.id):await m.create(s.value);r.replace({name:"success",params:{id:t}})}catch(d){console.log(d)}finally{h.value=!1}};return(d,t)=>{const k=U("RouterLink");return o(),n("div",E,[e("div",I,[$,D(k,{to:{name:"home"},class:"btn btn-ghost"},{default:R(()=>[A(" Voltar ")]),_:1})]),s.value.status!=="Aguardando"?(o(),n("div",J,[e("div",null,[T,e("span",null,[e("p",Q,_(s.value.status),1),s.value.opinio?(o(),n("p",Y,_(s.value.opinio),1)):u("",!0)])])])):u("",!0),e("form",{onSubmit:z(w,["prevent"])},[e("div",H,[e("div",K,[O,i(e("select",{class:"select select-bordered","onUpdate:modelValue":t[0]||(t[0]=a=>s.value.course=a),required:""},Z,512),[[j,s.value.course]])]),e("div",ee,[se,i(e("input",{type:"text",placeholder:"DRE",class:"input input-bordered","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.register=a),required:""},null,512),[[v,s.value.register]])]),e("div",te,[ae,i(e("input",{type:"text",placeholder:"Nome completo",class:"input input-bordered","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.name=a),required:""},null,512),[[v,s.value.name]])]),e("div",le,[oe,i(e("input",{type:"text",placeholder:"email",class:"input input-bordered","onUpdate:modelValue":t[3]||(t[3]=a=>s.value.email=a),required:""},null,512),[[v,s.value.email]])]),b.value?(o(),n("fieldset",ne,[re,(o(!0),n(M,null,N(b.value.problems,a=>(o(),n("div",{class:"form-control mb-4",key:a.title},[e("label",ie,[e("div",ce,[e("span",null,_(a.title),1),e("small",de,_(a.description),1)]),i(e("input",{type:"checkbox",class:"checkbox",value:a.title,"onUpdate:modelValue":t[4]||(t[4]=y=>s.value.problems=y)},null,8,ue),[[g,s.value.problems]])])]))),128))])):u("",!0),e("div",pe,[e("label",me,[_e,i(e("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":t[5]||(t[5]=a=>s.value.term=a)},null,512),[[g,s.value.term]])])]),e("div",ve,[be,i(e("textarea",{class:"textarea textarea-bordered w-full",placeholder:"Jusquifique o parecer","onUpdate:modelValue":t[6]||(t[6]=a=>s.value.justification=a)},null,512),[[v,s.value.justification]])]),e("div",he,[s.value.url?(o(),n("a",{key:0,href:s.value.url,class:"btn btn-link",target:"_blank",rel:"noopener noreferrer"},"Visualizar CRID",8,fe)):u("",!0),ge,e("label",xe,[we,e("input",{accept:"application/pdf",onChange:x,type:"file",class:"block w-full text-sm file:mr-4 file:btn file:btn-primary file:btn-outline"},null,32)])]),e("div",ke,[s.value.status&&s.value.status==="Aguardando"?(o(),n("button",{key:0,type:"submit",class:q(["btn btn-primary px-6 disabled:cursor-not-allowed",h.value&&"loading"]),disabled:!s.value.term}," Salvar ",10,ye)):u("",!0),s.value.status&&s.value.status!=="Aguardando"?(o(),n("div",Ce,Se)):u("",!0)])])],40,G)])}}};export{Re as default};
