import{z as q,r as w,A as D,y as T,M as h,B as x,L as v,$ as _,C as y,x as g,D as C,E as V,c as E,d as c,e as m,f as e,F as M,k as S,t as f,n as L,g as $,w as R,h as B,G as d,H as F,i as k,l as N,I as U,J as j,o as I,_ as O,m as z,j as H}from"./index.f8b31360.js";import{s as G}from"./settings.f62b31a1.js";const A=q("order",()=>{const r=w(5),l=w([]),t=D({course:"Todos",status:["Aguardando"],name:""}),n=w(null),i=T(()=>n.value!=null&&l.value.length>r.value-1),u=async()=>{let s;t.course!="Todos"?s=h(y(g,"users"),_("course","==",t.course),_("status","in",t.status),v("name"),x(r.value)):s=h(y(g,"users"),_("status","in",t.status),v("name"),x(r.value)),await C(s).then(o=>{n.value=o.docs[o.docs.length-1],l.value=o.docs.map(p=>({id:p.id,...p.data()}))})};return{orders:l,filters:t,fetch:u,findByName:async()=>{v.value=[],n.value=null;let s;t.name?(s=h(y(g,"users"),_("name",">=",t.name&&t.name.toUpperCase()),_("name","<=",t.name&&t.name.toUpperCase()+"\uF8FF"),v("name"),x(r.value)),await C(s).then(o=>{l.value=o.docs.map(p=>({id:p.id,...p.data()}))})):u()},btnLoadMoreVisible:i,loadMore:async()=>{let s;t.course!="Todos"?s=h(y(g,"users"),_("course","==",t.course),_("status","in",t.status),v("name"),V(n.value),x(r.value)):s=h(y(g,"users"),_("status","in",t.status),v("name"),V(n.value),x(r.value)),await C(s).then(o=>{n.value=o.docs[o.docs.length-1],o.forEach(p=>{l.value.push({id:p.id,...p.data()})})})}}}),P={class:"overflow-x-auto w-full"},J={class:"table w-full"},K=e("thead",null,[e("tr",null,[e("th",null,"Aluno"),e("th",null,"DRE"),e("th",null,"Curso"),e("th",null,"Status"),e("th",null,"Efetivado/SIGA"),e("th")])],-1),Q={class:"font-bold"},W={class:"text-sm opacity-50"},X=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})],-1),Y={key:0},Z=e("td",{colspan:"6",class:"text-center"},"Nenhum registro encontrado",-1),ee=[Z],se={class:"flex justify-center py-4"},te={__name:"Table",props:{orders:Array},setup(r){const l=A(),t=n=>n==="Aguardando"?"badge-warning":n==="Deferido"?"badge-success":n==="Indeferido"?"badge-error":"badge-info";return(n,i)=>{const u=E("RouterLink");return c(),m("div",null,[e("div",P,[e("table",J,[K,e("tbody",null,[(c(!0),m(M,null,S(r.orders,a=>(c(),m("tr",{key:a.id},[e("td",null,[e("div",null,[e("div",Q,f(a.name),1),e("div",W,f(a.email),1)])]),e("td",null,f(a.register),1),e("td",null,f(a.course),1),e("th",null,[e("div",{class:L(["badge badge-outline",t(a.status)])},f(a.status),3)]),e("td",null,[e("span",{class:L(a.provided?"text-success":"text-error")},f(a.provided?"Sim":"N\xE3o"),3)]),e("td",null,[$(u,{to:{name:"manager",params:{id:a.id}},class:"btn btn-square btn-sm"},{default:R(()=>[X]),_:2},1032,["to"])])]))),128)),r.orders.length===0?(c(),m("tr",Y,ee)):B("",!0)])])]),e("div",se,[d(l).btnLoadMoreVisible?(c(),m("button",{key:0,type:"button",class:"btn btn-primary btn-sm",onClick:i[0]||(i[0]=(...a)=>d(l).loadMore&&d(l).loadMore(...a))}," Exibir mais... ")):B("",!0)])])}}},oe={class:"modal"},ne={class:"modal-box relative"},ae=e("h3",{class:"text-lg font-bold mb-6"},"Filtrar Solicita\xE7\xF5es",-1),le={class:"p-4 mb-4 border border-base-200 rounded-md"},re=e("legend",{class:"text-content text-sm font-semibold"},"Curso",-1),ie={class:"label cursor-pointer"},ue={class:"label-text"},de=["value"],ce={class:"p-4 mb-4 border border-base-200 rounded-md"},me=e("legend",{class:"text-content text-sm font-semibold"},"Status",-1),be={class:"label cursor-pointer"},pe={class:"label-text"},_e=["value"],fe={__name:"FilterModal",props:{isOpen:Boolean},emits:["close"],setup(r,{emit:l}){const t=async()=>{await i.fetch(),n()},n=()=>{l("close")},i=A(),{filters:u}=F(i);return(a,b)=>(c(),m("div",null,[k(e("input",{type:"checkbox",class:"modal-toggle","onUpdate:modelValue":b[0]||(b[0]=s=>U(isOpen)?isOpen.value=s:null)},null,512),[[N,r.isOpen]]),e("div",oe,[e("div",ne,[e("button",{onClick:n,class:"btn btn-sm btn-circle absolute right-2 top-2"},"\u2715"),ae,e("fieldset",le,[re,(c(),m(M,null,S(["Todos","Integral","Noturno"],s=>e("div",{class:"form-control",key:s},[e("label",ie,[e("span",ue,f(s),1),k(e("input",{type:"radio",name:"radio-6",class:"radio","onUpdate:modelValue":b[1]||(b[1]=o=>d(u).course=o),value:s},null,8,de),[[j,d(u).course]])])])),64))]),e("fieldset",ce,[me,(c(),m(M,null,S(["Aguardando","Deferido","Indeferido"],s=>e("div",{class:"form-control",key:s},[e("label",be,[e("span",pe,f(s),1),k(e("input",{type:"checkbox",class:"checkbox","onUpdate:modelValue":b[2]||(b[2]=o=>d(u).status=o),value:s},null,8,_e),[[N,d(u).status]])])])),64))]),e("div",{class:"form-control mt-6"},[e("button",{onClick:t,class:"btn btn-primary"},"Filtrar")])])])]))}},ve={class:"container mx-auto px-4 pb-12"},he=e("h1",{class:"text-3xl font-bold my-8"},"Solicita\xE7\xF5es",-1),xe={class:"flex items-center sm:justify-between mb-4"},ye=["onSubmit"],ge={class:"form-control w-full"},we={class:"flex items-center space-x-2"},$e=e("button",{type:"submit",class:"btn btn-primary btn-sm"}," Pesquisar ",-1),Me={__name:"AdminView",setup(r){const l=A(),{filters:t,orders:n}=F(l),i=w(!1),u=w(null);I(async()=>{await l.fetch(),u.value=await G.find()});const a=async()=>{await l.findByName()};return(b,s)=>(c(),m("div",ve,[$(O,{onSearch:s[0]||(s[0]=o=>i.value=!0)}),he,$(fe,{onClose:s[1]||(s[1]=o=>i.value=!1),"is-open":i.value},null,8,["is-open"]),e("div",xe,[e("form",{onSubmit:z(a,["prevent"])},[e("div",ge,[e("div",we,[k(e("input",{type:"search",placeholder:"Pesquisar por nome",class:"input input-bordered input-sm","onUpdate:modelValue":s[2]||(s[2]=o=>d(t).name=o)},null,512),[[H,d(t).name]]),$e])])],40,ye),e("button",{type:"button",class:"btn btn-primary btn-sm",onClick:s[3]||(s[3]=o=>i.value=!0)}," Filtrar ")]),$(te,{orders:d(n)},null,8,["orders"])]))}};export{Me as default};
